var b=Object.defineProperty;var M=(d,g,t)=>g in d?b(d,g,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[g]=t;var h=(d,g,t)=>(M(d,typeof g!="symbol"?g+"":g,t),t);(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function L(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var C={exports:{}};(function(d){var g=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(a,n,o){this.fn=a,this.context=n,this.once=o||!1}function r(a,n,o,l,T){if(typeof o!="function")throw new TypeError("The listener must be a function");var E=new s(o,l||a,T),f=t?t+n:n;return a._events[f]?a._events[f].fn?a._events[f]=[a._events[f],E]:a._events[f].push(E):(a._events[f]=E,a._eventsCount++),a}function p(a,n){--a._eventsCount===0?a._events=new i:delete a._events[n]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var n=[],o,l;if(this._eventsCount===0)return n;for(l in o=this._events)g.call(o,l)&&n.push(t?l.slice(1):l);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(o)):n},c.prototype.listeners=function(n){var o=t?t+n:n,l=this._events[o];if(!l)return[];if(l.fn)return[l.fn];for(var T=0,E=l.length,f=new Array(E);T<E;T++)f[T]=l[T].fn;return f},c.prototype.listenerCount=function(n){var o=t?t+n:n,l=this._events[o];return l?l.fn?1:l.length:0},c.prototype.emit=function(n,o,l,T,E,f){var O=t?t+n:n;if(!this._events[O])return!1;var u=this._events[O],R=arguments.length,A,m;if(u.fn){switch(u.once&&this.removeListener(n,u.fn,void 0,!0),R){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,o),!0;case 3:return u.fn.call(u.context,o,l),!0;case 4:return u.fn.call(u.context,o,l,T),!0;case 5:return u.fn.call(u.context,o,l,T,E),!0;case 6:return u.fn.call(u.context,o,l,T,E,f),!0}for(m=1,A=new Array(R-1);m<R;m++)A[m-1]=arguments[m];u.fn.apply(u.context,A)}else{var P=u.length,w;for(m=0;m<P;m++)switch(u[m].once&&this.removeListener(n,u[m].fn,void 0,!0),R){case 1:u[m].fn.call(u[m].context);break;case 2:u[m].fn.call(u[m].context,o);break;case 3:u[m].fn.call(u[m].context,o,l);break;case 4:u[m].fn.call(u[m].context,o,l,T);break;default:if(!A)for(w=1,A=new Array(R-1);w<R;w++)A[w-1]=arguments[w];u[m].fn.apply(u[m].context,A)}}return!0},c.prototype.on=function(n,o,l){return r(this,n,o,l,!1)},c.prototype.once=function(n,o,l){return r(this,n,o,l,!0)},c.prototype.removeListener=function(n,o,l,T){var E=t?t+n:n;if(!this._events[E])return this;if(!o)return p(this,E),this;var f=this._events[E];if(f.fn)f.fn===o&&(!T||f.once)&&(!l||f.context===l)&&p(this,E);else{for(var O=0,u=[],R=f.length;O<R;O++)(f[O].fn!==o||T&&!f[O].once||l&&f[O].context!==l)&&u.push(f[O]);u.length?this._events[E]=u.length===1?u[0]:u:p(this,E)}return this},c.prototype.removeAllListeners=function(n){var o;return n?(o=t?t+n:n,this._events[o]&&p(this,o)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,d.exports=c})(C);var I=C.exports;const y=L(I),D={DOWN:"down",UP:"up",CLICK:"click",DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",OVER:"over",OUT:"out",CONTROLS_ACTIVE:"controlsActive",CONTROLS_INACTIVE:"controlsInactive",CONTROL_RIGHT_UPDATE:"controlRightUpdate",CONTROL_LEFT_UPDATE:"controlLeftUpdate",CONTROL_TOP_UPDATE:"controlTopUpdate",CONTROL_BOTTOM_UPDATE:"controlBottomUpdate",RESIZE:"resize",RESIZE_START:"resizeStart",RESIZE_END:"resizeEnd",UPDATE:"update"},_={LEFT:"w-resize",RIGHT:"e-resize",TOP:"n-resize",BOTTOM:"s-resize",LEFT_TOP:"nw-resize",RIGHT_TOP:"ne-resize",LEFT_BOTTOM:"sw-resize",RIGHT_BOTTOM:"se-resize",OVER:"grab",DEFAULT:"default"},N={CONTROLS:"data-overdrag-controls",OVER:"data-overdrag-over",DOWN:"data-overdrag-down",DRAG:"data-overdrag-dragging",DRAG_MODE:"data-overdrag-drag-mode",RESIZE:"data-overdrag-resizing",RESIZE_MODE:"data-overdrag-resize-mode"},e=class extends y{constructor({element:t,minContentHeight:i=e.DEFAULTS.minContentHeight,minContentWidth:s=e.DEFAULTS.minContentWidth,maxContentWidth:r=e.DEFAULTS.maxContentWidth,maxContentHeight:p=e.DEFAULTS.maxContentHeight,snapThreshold:c=e.DEFAULTS.snapThreshold,controlsThreshold:a=e.DEFAULTS.controlsThreshold,clickDetectionThreshold:n=e.DEFAULTS.clickDetectionThreshold,stack:o=e.DEFAULTS.stack,excludePadding:l=e.DEFAULTS.excludePadding}){super();h(this,"window",window);h(this,"element");h(this,"parentElement");h(this,"snapThreshold");h(this,"controlsThreshold");h(this,"minContentHeight");h(this,"minContentWidth");h(this,"maxContentWidth");h(this,"maxContentHeight");h(this,"clickDetectionThreshold");h(this,"controlsActive",!1);h(this,"over",!1);h(this,"dragging",!1);h(this,"resizing",!1);h(this,"down",!1);h(this,"parentMouseX",0);h(this,"parentMouseY",0);h(this,"offsetX",0);h(this,"offsetY",0);h(this,"position");h(this,"downPosition");h(this,"parentPosition");h(this,"stack");h(this,"excludePadding");h(this,"controls",{left:!1,right:!1,top:!1,bottom:!1});h(this,"downMouseX",0);h(this,"downMouseY",0);h(this,"onMouseOver",(t,i=!1)=>{var s;this.over||e.activeInstance&&e.activeInstance!==this||(!this.stack&&!i&&((s=e.__ENGAGED_STACK__.at(-1))==null||s.onMouseOut(t,!0),e.__ENGAGED_STACK__.push(this)),this.setOverState(!0),this.element.addEventListener("mouseleave",this.onMouseOut),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mousedown",this.onMouseDown))});h(this,"onMouseOut",(t,i=!1)=>{var r;if(!this.over)return;const s=e.__ENGAGED_STACK__.at(-1);!i&&s&&s!==this||(this.element.removeEventListener("mouseleave",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.setOverState(!1),this.resetControlPoints(),!this.stack&&!i&&(e.__ENGAGED_STACK__.pop(),(r=e.__ENGAGED_STACK__.at(-1))==null||r.onMouseOver(t,!0)))});h(this,"onMouseDown",t=>{t.preventDefault();const i=e.__ENGAGED_STACK__.at(-1);i&&i!==this||(this.element.removeEventListener("mouseleave",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseenter",this.onMouseOver),this.down=!0,e.activeInstance=this,this.downPosition={...this.position,fullBounds:{...this.position.fullBounds},borders:{...this.position.borders},margins:{...this.position.margins},paddings:{...this.position.paddings},visualBounds:{...this.position.visualBounds}},this.offsetX=this.parentMouseX-this.position.fullBounds.left,this.offsetY=this.parentMouseY-this.position.fullBounds.top,this.downMouseX=this.parentMouseX,this.downMouseY=this.parentMouseY,this.dragging=!this.controlsActive,this.resizing=this.controlsActive,this.element.setAttribute(e.ATTRIBUTES.DOWN,""),this.emit(e.EVENTS.DOWN,this),this.dragging?(this.element.setAttribute(e.ATTRIBUTES.DRAG_MODE,""),this.emit(e.EVENTS.DRAG_START,this)):this.resizing&&(this.element.setAttribute(e.ATTRIBUTES.RESIZE_MODE,""),this.emit(e.EVENTS.RESIZE_START,this)),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseup",this.onMouseUp))});h(this,"onMouseUp",t=>{this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mouseleave",this.onMouseOut),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mouseenter",this.onMouseOver),t.preventDefault(),e.activeInstance=null,this.down=!1,this.dragging?(this.element.removeAttribute(e.ATTRIBUTES.DRAG_MODE),this.emit(e.EVENTS.DRAG_END,this)):this.resizing&&(this.element.removeAttribute(e.ATTRIBUTES.RESIZE_MODE),this.emit(e.EVENTS.RESIZE_END,this)),this.dragging=!1,this.resizing=!1,this.element.removeAttribute(e.ATTRIBUTES.DOWN),this.element.removeAttribute(e.ATTRIBUTES.DRAG),this.element.removeAttribute(e.ATTRIBUTES.RESIZE),this.emit(e.EVENTS.UP,this),this.isClick()&&this.emit(e.EVENTS.CLICK,this)});h(this,"onMouseMove",t=>{this.parentPosition=this.getComputedParentPosition(),this.position=this.getComputedElementPosition(),this.parentMouseX=t.clientX-this.parentPosition.offsetLeft,this.parentMouseY=t.clientY-this.parentPosition.offsetTop,this.down?this.dragging?this.drag():this.reSize():(this.updateControlPointsState(),this.updateCursorStyle())});if(this.minContentHeight=i,this.minContentWidth=s,this.maxContentWidth=r,this.maxContentHeight=p,this.snapThreshold=c,this.controlsThreshold=a,this.excludePadding=l,this.element=t,this.element.style.position="absolute",this.stack=o,this.element.__overdrag=this,this.clickDetectionThreshold=n,!this.element.offsetParent)throw new Error(e.ERROR.NO_PARENT);this.parentElement=this.element.offsetParent,this.element.addEventListener("mouseenter",this.onMouseOver),this.parentPosition=this.getComputedParentPosition(),this.position=this.getComputedElementPosition(),this.downPosition=this.position,this.assignInitialStyles()}assignInitialStyles(){this.element.style.left=`${this.position.fullBounds.left}px`,this.element.style.top=`${this.position.fullBounds.top}px`,this.element.style.width=`${this.position.width}px`,this.element.style.height=`${this.position.height}px`,this.element.style.right=`${this.parentPosition.actionBounds.right-this.position.fullBounds.right}px`,this.element.style.bottom=`${this.parentPosition.actionBounds.bottom-this.position.fullBounds.bottom}px`,this.element.setAttribute("width",`${this.position.width}`),this.element.setAttribute("height",`${this.position.height}`)}_getInt(t){return parseInt(t||"0")}emit(t,...i){return super.emit.apply(this,[e.EVENTS.UPDATE,this]),super.emit.apply(this,[t,...i])}getComputedParentPosition(){const t=this.parentElement.getBoundingClientRect(),i=getComputedStyle(this.parentElement),s=this.excludePadding?{top:0,right:0,bottom:0,left:0}:{top:this._getInt(i.paddingTop),right:this._getInt(i.paddingRight),bottom:this._getInt(i.paddingBottom),left:this._getInt(i.paddingLeft)},r=this._getInt(i.width),p=this._getInt(i.height);return{actionBounds:{top:s.top,left:s.left,right:r+s.left,bottom:p+s.top,width:r+s.left+s.right,height:p+s.top+s.bottom},offsetLeft:t.left+this._getInt(i.borderLeftWidth),offsetTop:t.top+this._getInt(i.borderTopWidth)}}getComputedElementPosition(){const t=getComputedStyle(this.element),i={top:this._getInt(t.marginTop),right:this._getInt(t.marginRight),bottom:this._getInt(t.marginBottom),left:this._getInt(t.marginLeft)},s={top:this._getInt(t.borderTopWidth),right:this._getInt(t.borderRightWidth),bottom:this._getInt(t.borderBottomWidth),left:this._getInt(t.borderLeftWidth)},r={top:this._getInt(t.paddingTop),right:this._getInt(t.paddingRight),bottom:this._getInt(t.paddingBottom),left:this._getInt(t.paddingLeft)},p=this._getInt(t.top),c=this._getInt(t.left),a=this._getInt(t.width),n=this._getInt(t.height),o={width:a+s.right+s.left+r.right+r.left,height:n+s.top+s.bottom+r.top+r.bottom,left:c+i.left,top:p+i.top},l=o.width+i.right+i.left,T=o.height+i.top+i.bottom,E={width:l,height:T,left:c,top:p,right:c+l,bottom:p+T};return{width:a,height:n,verticalDiff:T-n,horizontalDiff:l-a,visualBounds:{...o,right:o.left+o.width,bottom:o.top+o.height},fullBounds:E,margins:i,borders:s,paddings:r}}isClick(){return Math.abs(this.parentMouseX-this.downMouseX)<this.clickDetectionThreshold&&Math.abs(this.parentMouseY-this.downMouseY)<this.clickDetectionThreshold}setOverState(t){this.over=t,t?(this.element.setAttribute(e.ATTRIBUTES.OVER,""),this.emit(e.EVENTS.OVER,this)):(this.element.removeAttribute(e.ATTRIBUTES.OVER),this.emit(e.EVENTS.OUT,this))}resetControlPoints(){const t=this.controlsActive;this.controlsActive=this.controls.left=this.controls.right=this.controls.top=this.controls.bottom=!1,t!==this.controlsActive&&(this.element.removeAttribute(e.ATTRIBUTES.CONTROLS),this.emit(e.EVENTS.CONTROLS_INACTIVE,this))}updateControlPointsState(){const t=JSON.stringify(this.controls),i=this.parentMouseY>=this.position.visualBounds.top&&this.parentMouseY<=this.position.visualBounds.bottom,s=this.parentMouseX>=this.position.visualBounds.left&&this.parentMouseX<=this.position.visualBounds.right,r=this.parentMouseX-this.position.visualBounds.left,p=this.position.visualBounds.right-this.parentMouseX,c=this.parentMouseY-this.position.visualBounds.top,a=this.position.visualBounds.bottom-this.parentMouseY;this.controls.left=i&&r>=0&&r<=this.controlsThreshold,this.controls.right=i&&p>=0&&p<=this.controlsThreshold,this.controls.top=s&&c>=0&&c<=this.controlsThreshold,this.controls.bottom=s&&a>=0&&a<=this.controlsThreshold;const n=this.controls.left||this.controls.right||this.controls.top||this.controls.bottom;n&&t!==JSON.stringify(this.controls)?(this.controlsActive=!0,this.element.setAttribute(e.ATTRIBUTES.CONTROLS,Object.keys(this.controls).filter(o=>this.controls[o]).join("-")),this.emit(e.EVENTS.CONTROLS_ACTIVE,this)):n||this.resetControlPoints()}updateCursorStyle(){let t=null;this.controls.top&&this.controls.left?t=e.CURSOR.LEFT_TOP:this.controls.bottom&&this.controls.right?t=e.CURSOR.RIGHT_BOTTOM:this.controls.bottom&&this.controls.left?t=e.CURSOR.LEFT_BOTTOM:this.controls.top&&this.controls.right?t=e.CURSOR.RIGHT_TOP:this.controls.top?t=e.CURSOR.TOP:this.controls.bottom?t=e.CURSOR.BOTTOM:this.controls.left?t=e.CURSOR.LEFT:this.controls.right?t=e.CURSOR.RIGHT:this.over&&(t=e.CURSOR.OVER),this.element.style.setProperty("cursor",t)}reSize(){let t=!1;this.controls.top&&(t=this.movePointTop()||t),this.controls.bottom&&(t=this.movePointBottom()||t),this.controls.left&&(t=this.movePointLeft()||t),this.controls.right&&(t=this.movePointRight()||t),t&&(this.element.setAttribute(e.ATTRIBUTES.RESIZE,""),this.emit(e.EVENTS.RESIZE,this))}assignStyle(t){const i={top:this.position.fullBounds.top,left:this.position.fullBounds.left,width:this.position.width,height:this.position.height,...t};this.element.style.left=`${i.left}px`,this.element.style.top=`${i.top}px`,this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.element.setAttribute("width",`${i.width}`),this.element.setAttribute("height",`${i.height}`),this.position=this.getComputedElementPosition(),this.element.style.right=`${this.parentPosition.actionBounds.right-this.position.fullBounds.right}px`,this.element.style.bottom=`${this.parentPosition.actionBounds.bottom-this.position.fullBounds.bottom}px`}movePointRight(){const t=Math.max(this.minContentWidth,Math.min(this.maxContentWidth,this.calcRight()-this.downPosition.fullBounds.left-this.position.horizontalDiff));return t!==this.position.width?(this.assignStyle({width:t}),this.emit(e.EVENTS.CONTROL_RIGHT_UPDATE,this),!0):!1}movePointBottom(){const t=Math.max(this.minContentHeight,Math.min(this.maxContentHeight,this.calcBottom()-this.downPosition.fullBounds.top-this.position.verticalDiff));return t!==this.position.height?(this.assignStyle({height:t}),this.emit(e.EVENTS.CONTROL_BOTTOM_UPDATE,this),!0):!1}movePointLeft(){const t=this.minContentWidth+this.position.horizontalDiff,i=this.maxContentWidth+this.position.horizontalDiff,s=Math.min(Math.max(this.calcLeft(),this.downPosition.fullBounds.right-i),this.downPosition.fullBounds.right-t),r=this.downPosition.fullBounds.right-s-this.position.horizontalDiff;return s!==this.position.fullBounds.left?(this.assignStyle({width:r,left:s}),this.emit(e.EVENTS.CONTROL_LEFT_UPDATE,this),!0):!1}movePointTop(){const t=this.minContentHeight+this.position.verticalDiff,i=this.maxContentHeight+this.position.verticalDiff,s=Math.min(Math.max(this.calcTop(),this.downPosition.fullBounds.bottom-i),this.downPosition.fullBounds.bottom-t),r=this.downPosition.fullBounds.bottom-s-this.position.verticalDiff;return s!==this.position.fullBounds.top?(this.assignStyle({height:r,top:s}),this.emit(e.EVENTS.CONTROL_TOP_UPDATE,this),!0):!1}calcRight(){let t=this.parentMouseX-this.offsetX+this.downPosition.fullBounds.width;return t=t+this.snapThreshold>=this.parentPosition.actionBounds.right?this.parentPosition.actionBounds.right:t,t}calcBottom(){let t=this.parentMouseY-this.offsetY+this.downPosition.fullBounds.height;return t=t+this.snapThreshold>=this.parentPosition.actionBounds.bottom?this.parentPosition.actionBounds.bottom:t,t}calcLeft(){const t=this.parentMouseX-this.offsetX;return t-this.snapThreshold<=this.parentPosition.actionBounds.left?this.parentPosition.actionBounds.left:t}calcTop(){const t=this.parentMouseY-this.offsetY;return t-this.snapThreshold<=this.parentPosition.actionBounds.top?this.parentPosition.actionBounds.top:t}drag(){const t=this.calcLeft(),i=this.calcTop(),s=i+this.position.fullBounds.height+this.snapThreshold>=this.parentPosition.actionBounds.bottom?this.parentPosition.actionBounds.bottom-this.position.fullBounds.height:i,r=t+this.position.fullBounds.width+this.snapThreshold>=this.parentPosition.actionBounds.right?this.parentPosition.actionBounds.right-this.position.fullBounds.width:t;(this.position.fullBounds.left!==r||this.position.fullBounds.top!==s)&&(this.assignStyle({left:r,top:s}),this.element.setAttribute(e.ATTRIBUTES.DRAG,""),this.emit(e.EVENTS.DRAG,this))}};let v=e;h(v,"__ENGAGED_STACK__",[]),h(v,"ERROR",{NO_PARENT:"Element must have an offset parent with position relative)"}),h(v,"DEFAULTS",{snapThreshold:16,controlsThreshold:16,minContentHeight:50,minContentWidth:50,maxContentWidth:1/0,maxContentHeight:1/0,clickDetectionThreshold:5,stack:!1,excludePadding:!1}),h(v,"ATTRIBUTES",N),h(v,"CURSOR",_),h(v,"EVENTS",D),h(v,"activeInstance",null);const U=document.querySelectorAll(".overdrag");U.forEach(d=>{const g=function(){try{return JSON.parse(d.getAttribute("data-props")||"")}catch{return{}}}(),t=new v({element:d,...g});t.element.data=t.element.querySelector(".data"),t.on("update",B),B(t),t.on(v.EVENTS.CLICK,()=>console.log("click",t))});function B(d){d.element.data.innerHTML=`
    ${S("controls",d.controlsActive.toString())}
    ${S("dragging",d.dragging.toString())}
    ${S("over",d.over.toString())}
    ${S("down",d.down.toString())} 
    ${S("resizing",d.resizing.toString())} 
    ${S("top",d.position.visualBounds.top.toString())}
    ${S("left",d.position.visualBounds.left.toString())}  
    ${S("width",d.position.width.toString())}
    ${S("height",d.position.height.toString())}  
    ${S("control",d.element.getAttribute(v.ATTRIBUTES.CONTROLS)||"")}  
  `}function S(d,g){return`<div>${d}: ${g}</div>`}
